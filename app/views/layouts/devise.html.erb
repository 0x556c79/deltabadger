<!DOCTYPE html>
<html lang="<%= I18n.locale %>">
  <head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="ie=edge" http-equiv="X-UA-Compatible">
    <meta name="theme-color" content="#f5f6f8" id="theme-color-meta">

    <title><%= content_for?(:title) ? yield(:title) : t('meta.title') %></title>

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <%= render 'application/favicon' %>

    <%= stylesheet_link_tag 'application', media: 'all', "data-turbo-track": "reload" %>
    <%= javascript_include_tag "application", "data-turbo-track": "reload", defer: true %>

    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <script>
      // service worker registration for PWA
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register("/service-worker.js").then(function(registration) {
          console.log('ServiceWorker registration successful with scope: ', registration.scope);
        }).catch(function(error) {
          console.log('ServiceWorker registration failed: ', error);
        });
      }
    </script>
  </head>

  <body data-controller="hotwire-animations">
    <div data-tauri-drag-region class="titlebar-drag-region"></div>
    <div class="devise">

      <div class="devise__row">
        <div class="devise__col">
          <%= yield %>
        </div>
      </div>
      <div id="flash">
        <%= render 'layouts/flash' %>
      </div>

    </div>
  </body>
</html>
